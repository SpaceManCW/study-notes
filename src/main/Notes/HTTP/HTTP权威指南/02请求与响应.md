### URL与HTTP报文 p19-p70 2022.01.03

包括：URL组成、协议、HTTP报文组成、HTTP方法、状态码

URL是因特网资源的标准化名称，指向每一条电子信息，告诉你他们位于何处，如何交互。URL分为三部分

例如：http://www.joes-hardware.com/seasonal/index-fall.html

- URL方案，也就是协议，规定如何访问(http)
- 服务器位置，告知客户端资源位于何处，主机名(www.joes-hardware.com)
- 资源路径，说明请求的是服务器上哪个特定的本地资源(/seasonal/index-fall.html)

#### 协议

- http 超文本传输协议，与通用URL格式相符，省略端口默认80
- https http使用网景的SSL，SSL提供端到端的加密机制。默认端口443
- mailto E-mail地址，不指向任何对象，格式与标准URL不同
- ftp 文件传输协议，可用来从FTP服务器上下载或上传资源并获取FTP服务器上的目录结构内容列表
- file 表示一台指定主机上可直接访问的文件

#### HTTP报文

报文由起始行、首部、主体组成。由行进行分隔。每行以一个回车和一个换行符终止。

起始行：

- 请求报文起始行：HTTP方法、请求URL、版本
- 响应报文起始行：版本、状态码、状态短语

HTTP方法：

- GET 从服务器获取文档
- HEAD 只获取首部
- POST 向服务器发送数据
- PUT 将请求的主体部分放到服务器
- TRACH 对报文进行追踪
- OPTIONS 决定可以在服务器上使用哪些方法
- DELETE 从服务器删除一份文档

#### HTTP方法详解

并不是每个服务器都实现了所有方法，即使实现了所有方法，也可能受限，通常是在服务器的配置中设置。

- GET  不多赘述了
- HEAD  与GET类似，但服务器只返回首部。允许未获取资源的情况下对首部进行检查，可以了解资源的情况。
- PUT  PUT方法会向服务器写入文档。就是让服务器用请求主体部分来创建一个由请求URL命名的新文档，已存在就代替
- POST  常用来支持表单，向服务器发送表单数据。那么与PUT区别就在于，PUT传的数据以URL命名并形成一个文档。POST只是上传了数据(看p58、p59的图）
- TRACE  请求在传输时可能经过防火墙、代理、网关，请求可能会被修改，TRACE允许跟踪请求。服务端的响应主体携带接收的请求报文传给客户端，客户端可以查看原始报文在传输中是否被修改或损坏。
- OPTIONS  请求服务器告知其支持的功能，包括通常支持的方法以及对特殊资源的方法
- DELETE  请服务器删除请求URL所指定的资源。但是不保证一定删除，因为HTTP规范允许服务器不通知客户端就撤销请求

#### 状态码详解

状态码的作用是让客户端了解事务的处理结果。首先说一下100 Continue

100 Continue  客户端有数据要发给服务器，客户端想知道服务器是否会接受这个数据。其实这是一种优化，避免客户端发给服务器一个服务器无法处理或使用的大实体。

比较常见的状态码，比如：200请求成功、301永久重定向、302临时重定向、304资源未修改、400请求是错误的、401需要身份验证、403服务器拒绝了请求、404服务器没找到资源。需要额外说明的有：

- 302 客户端应该使用Location首部给出的URL临时定位资源，但以后仍使用旧的URL
- 303 在HTTP1.1中用303，其实效果和HTTP1.0的302一样。都是在POST响应中给出新的URL并让客户端往这个URL发一个GET
- 307 将POST重定向为GET显然不好，307与302/303区别就是不会重定向为GET，而是询问用户是否往新的URL发POST
- 500 服务器遇到阻碍无法为请求提供服务
- 501 使用了服务器不支持的方法
- 502 错误网关，服务器作为网关或代理从上游服务器收到无效响应
- 503 服务器暂时无法使用
- 504 网关超时，响应来自网关或代理，等待的时候超时了

看了十分之一了。。。微笑。